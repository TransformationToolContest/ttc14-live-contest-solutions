/**
 */
package SoccerStrategy.Rules.impl;

import SoccerStrategy.Rules.MoveGoalKeeperNorth;
import SoccerStrategy.Rules.RulesPackage;

import SoccerStrategy.SoccerPitchToUpdate;
import SoccerStrategy.SoccerStrategyFactory;

import TGGLanguage.csp.*;

import TGGRuntime.EObjectContainer;
import TGGRuntime.Edge;
import TGGRuntime.IsApplicableMatch;
import TGGRuntime.IsApplicableRuleResult;
import TGGRuntime.Match;
import TGGRuntime.PerformRuleResult;
import TGGRuntime.TGGRuntimeFactory;

import TGGRuntime.impl.AbstractRuleImpl;

import csp.constraints.*;

import de.upb.tools.sdm.*;

import java.lang.reflect.InvocationTargetException;

import java.util.*;

import org.eclipse.emf.common.util.EList;

import org.eclipse.emf.ecore.EClass;
import org.eclipse.emf.ecore.EObject;
import org.eclipse.emf.ecore.EOperation;

import soccerpitch.Ball;
import soccerpitch.Field;
import soccerpitch.FieldPlayer;
import soccerpitch.GoalField;
import soccerpitch.GoalKeeper;
import soccerpitch.Player;
import soccerpitch.SoccerPitch;

import updatemodel.MovePlayer;
import updatemodel.ShootBall;
import updatemodel.Update;
import updatemodel.UpdatemodelFactory;

/**
 * <!-- begin-user-doc -->
 * An implementation of the model object '<em><b>Move Goal Keeper North</b></em>'.
 * <!-- end-user-doc -->
 * <p>
 * </p>
 *
 * @generated
 */
public class MoveGoalKeeperNorthImpl extends AbstractRuleImpl implements
		MoveGoalKeeperNorth {
	/**
	 * <!-- begin-user-doc -->
	 * <!-- end-user-doc -->
	 * @generated
	 */
	protected MoveGoalKeeperNorthImpl() {
		super();
	}

	/**
	 * <!-- begin-user-doc -->
	 * <!-- end-user-doc -->
	 * @generated
	 */
	@Override
	protected EClass eStaticClass() {
		return RulesPackage.Literals.MOVE_GOAL_KEEPER_NORTH;
	}

	/**
	 * <!-- begin-user-doc -->
	 * <!-- end-user-doc -->
	 * @generated
	 */
	public IsApplicableRuleResult isApplicable_FWD(Match match) {
		boolean fujaba__Success = false;
		Object _TmpObject = null;
		EClass eClass = null;
		Iterator fujaba__IterEClassToPerformOperation = null;
		EOperation performOperation = null;
		IsApplicableRuleResult ruleresult = null;
		GoalField goalField = null;
		GoalKeeper goalKeeper = null;
		GoalField northernField = null;
		SoccerPitch pitch = null;
		IsApplicableMatch isApplicableMatch = null;
		Update update = null;
		Iterator fujaba__IterPitchToP2u = null;
		SoccerPitchToUpdate p2u = null;

		// story node 'prepare return value'
		try {
			fujaba__Success = false;

			_TmpObject = (this.eClass());

			// ensure correct type and really bound of object eClass
			JavaSDM.ensure(_TmpObject instanceof EClass);
			eClass = (EClass) _TmpObject;
			// iterate to-many link eOperations from eClass to performOperation
			fujaba__Success = false;

			fujaba__IterEClassToPerformOperation = eClass.getEOperations()
					.iterator();

			while (!(fujaba__Success)
					&& fujaba__IterEClassToPerformOperation.hasNext()) {
				try {
					performOperation = (EOperation) fujaba__IterEClassToPerformOperation
							.next();

					// check object performOperation is really bound
					JavaSDM.ensure(performOperation != null);
					// attribute condition
					JavaSDM.ensure(JavaSDM.stringCompare(
							performOperation.getName(), "perform_FWD") == 0);

					fujaba__Success = true;
				} catch (JavaSDMException fujaba__InternalException) {
					fujaba__Success = false;
				}
			}
			JavaSDM.ensure(fujaba__Success);
			// create object ruleresult
			ruleresult = TGGRuntimeFactory.eINSTANCE
					.createIsApplicableRuleResult();

			// assign attribute ruleresult
			ruleresult.setSuccess(false);
			// assign attribute ruleresult
			ruleresult.setRule("MoveGoalKeeperNorth");

			// create link
			org.moflon.util.eMoflonEMFUtil.addOppositeReference(ruleresult,
					performOperation, "performOperation");
			fujaba__Success = true;
		} catch (JavaSDMException fujaba__InternalException) {
			fujaba__Success = false;
		}

		// story node 'core match'
		try {
			fujaba__Success = false;

			_TmpObject = (match.getObject("goalField"));

			// ensure correct type and really bound of object goalField
			JavaSDM.ensure(_TmpObject instanceof GoalField);
			goalField = (GoalField) _TmpObject;
			_TmpObject = (match.getObject("goalKeeper"));

			// ensure correct type and really bound of object goalKeeper
			JavaSDM.ensure(_TmpObject instanceof GoalKeeper);
			goalKeeper = (GoalKeeper) _TmpObject;
			_TmpObject = (match.getObject("northernField"));

			// ensure correct type and really bound of object northernField
			JavaSDM.ensure(_TmpObject instanceof GoalField);
			northernField = (GoalField) _TmpObject;
			_TmpObject = (match.getObject("pitch"));

			// ensure correct type and really bound of object pitch
			JavaSDM.ensure(_TmpObject instanceof SoccerPitch);
			pitch = (SoccerPitch) _TmpObject;
			// check object match is really bound
			JavaSDM.ensure(match != null);
			// check isomorphic binding between objects northernField and goalField 
			JavaSDM.ensure(!northernField.equals(goalField));

			fujaba__Success = true;
		} catch (JavaSDMException fujaba__InternalException) {
			fujaba__Success = false;
		}

		// story node 'find context'
		try {
			fujaba__Success = false;

			// check object goalField is really bound
			JavaSDM.ensure(goalField != null);
			// check object goalKeeper is really bound
			JavaSDM.ensure(goalKeeper != null);
			// check object northernField is really bound
			JavaSDM.ensure(northernField != null);
			// check object pitch is really bound
			JavaSDM.ensure(pitch != null);
			// check isomorphic binding between objects northernField and goalField 
			JavaSDM.ensure(!northernField.equals(goalField));

			// check link field from goalKeeper to goalField
			JavaSDM.ensure(goalField.equals(goalKeeper.getField()));

			// check link north from northernField to goalField
			JavaSDM.ensure(goalField.equals(northernField.getSouth()));

			// check link fields from goalField to pitch
			JavaSDM.ensure(pitch.equals(goalField.eContainer()));

			// check link fields from northernField to pitch
			JavaSDM.ensure(pitch.equals(northernField.eContainer()));

			// check link players from goalKeeper to pitch
			JavaSDM.ensure(pitch.equals(goalKeeper.eContainer()));

			// iterate to-many link source from pitch to p2u
			fujaba__Success = false;

			fujaba__IterPitchToP2u = new ArrayList(
					org.moflon.util.eMoflonEMFUtil.getOppositeReference(pitch,
							SoccerPitchToUpdate.class, "source")).iterator();

			while (fujaba__IterPitchToP2u.hasNext()) {
				try {
					p2u = (SoccerPitchToUpdate) fujaba__IterPitchToP2u.next();

					// check object p2u is really bound
					JavaSDM.ensure(p2u != null);
					// bind object
					update = p2u.getTarget();

					// check object update is really bound
					JavaSDM.ensure(update != null);

					// create object isApplicableMatch
					isApplicableMatch = TGGRuntimeFactory.eINSTANCE
							.createIsApplicableMatch();

					// statement node 'solve CSP'
					// Create CSP
					CSP csp = CspFactory.eINSTANCE.createCSP();
					isApplicableMatch.getAttributeInfo().add(csp);

					// Create literals

					// Create attribute variables
					Variable<Number> var_goalKeeper_number = CspFactory.eINSTANCE
							.createVariable("goalKeeper.number", true, csp);
					var_goalKeeper_number.setValue(goalKeeper.getNumber());

					// Create explicit parameters

					// Create unbound variables
					Variable<Number> var_moveAction_playerNumber = CspFactory.eINSTANCE
							.createVariable("moveAction.playerNumber", csp);

					// Create constraints
					Eq<Number> eq = new Eq<Number>();

					csp.getConstraints().add(eq);

					// Solve CSP
					eq.setRuleName("");
					eq.solve(var_goalKeeper_number, var_moveAction_playerNumber);

					// Snapshot pattern match on which CSP is solved
					isApplicableMatch.registerObject("pitch", pitch);
					isApplicableMatch.registerObject("goalField", goalField);
					isApplicableMatch.registerObject("goalKeeper", goalKeeper);
					isApplicableMatch.registerObject("update", update);
					isApplicableMatch.registerObject("p2u", p2u);
					isApplicableMatch.registerObject("northernField",
							northernField);

					// statement node 'check CSP'
					fujaba__Success = csp.check();
					if (fujaba__Success) {
						// story node 'add match to rule result'
						try {
							fujaba__Success = false;

							// check object isApplicableMatch is really bound
							JavaSDM.ensure(isApplicableMatch != null);
							// check object ruleresult is really bound
							JavaSDM.ensure(ruleresult != null);
							// assign attribute ruleresult
							ruleresult.setSuccess(true);

							// create link
							ruleresult.getIsApplicableMatch().add(
									isApplicableMatch);

							fujaba__Success = true;
						} catch (JavaSDMException fujaba__InternalException) {
							fujaba__Success = false;
						}

					} else {

					}

					fujaba__Success = true;
				} catch (JavaSDMException fujaba__InternalException) {
					fujaba__Success = false;
				}
			}
			JavaSDM.ensure(fujaba__Success);
			fujaba__Success = true;
		} catch (JavaSDMException fujaba__InternalException) {
			fujaba__Success = false;
		}

		return ruleresult;
	}

	/**
	 * <!-- begin-user-doc -->
	 * <!-- end-user-doc -->
	 * @generated
	 */
	public boolean isAppropriate_FWD(Match match, SoccerPitch pitch,
			GoalField goalField, GoalKeeper goalKeeper, GoalField northernField) {
		boolean fujaba__Success = false;
		Edge pitch__players__goalKeeper = null;
		Edge goalKeeper__field__goalField = null;
		Edge pitch__fields__northernField = null;
		Edge northernField__south__goalField = null;
		Edge pitch__fields__goalField = null;

		// statement node 'Solve CSP'
		// Create CSP
		CSP csp = CspFactory.eINSTANCE.createCSP();

		// Create literals

		// Create attribute variables
		Variable<soccerpitch.Teams> var_goalField_team = CspFactory.eINSTANCE
				.createVariable("goalField.team", true, csp);
		var_goalField_team.setValue(goalField.getTeam());
		Variable<soccerpitch.Teams> var_pitch_ownTeam = CspFactory.eINSTANCE
				.createVariable("pitch.ownTeam", true, csp);
		var_pitch_ownTeam.setValue(pitch.getOwnTeam());

		// Create explicit parameters

		// Create unbound variables

		// Create constraints
		Eq<soccerpitch.Teams> eq = new Eq<soccerpitch.Teams>();

		csp.getConstraints().add(eq);

		// Solve CSP
		eq.setRuleName("");
		eq.solve(var_goalField_team, var_pitch_ownTeam);

		// statement node 'Check CSP'
		fujaba__Success = csp.check();
		if (fujaba__Success) {
			// story node 'collect elements to be translated'
			try {
				fujaba__Success = false;

				// check object goalField is really bound
				JavaSDM.ensure(goalField != null);
				// check object goalKeeper is really bound
				JavaSDM.ensure(goalKeeper != null);
				// check object match is really bound
				JavaSDM.ensure(match != null);
				// check object pitch is really bound
				JavaSDM.ensure(pitch != null);
				// create object pitch__players__goalKeeper
				pitch__players__goalKeeper = TGGRuntimeFactory.eINSTANCE
						.createEdge();

				// create object goalKeeper__field__goalField
				goalKeeper__field__goalField = TGGRuntimeFactory.eINSTANCE
						.createEdge();

				// assign attribute pitch__players__goalKeeper
				pitch__players__goalKeeper.setName("players");
				// assign attribute goalKeeper__field__goalField
				goalKeeper__field__goalField.setName("field");

				// create link
				org.moflon.util.eMoflonEMFUtil.addOppositeReference(match,
						pitch__players__goalKeeper, "toBeTranslatedEdges");

				// create link
				org.moflon.util.eMoflonEMFUtil.addOppositeReference(match,
						goalKeeper__field__goalField, "toBeTranslatedEdges");

				// create link
				org.moflon.util.eMoflonEMFUtil.addOppositeReference(match,
						goalKeeper, "toBeTranslatedElements");

				// create link
				pitch__players__goalKeeper.setTrg(goalKeeper);

				// create link
				goalKeeper__field__goalField.setSrc(goalKeeper);

				// create link
				org.moflon.util.eMoflonEMFUtil.addOppositeReference(
						pitch__players__goalKeeper, pitch, "src");

				// create link
				org.moflon.util.eMoflonEMFUtil.addOppositeReference(
						goalKeeper__field__goalField, goalField, "trg");
				fujaba__Success = true;
			} catch (JavaSDMException fujaba__InternalException) {
				fujaba__Success = false;
			}

			// story node 'collect context elements'
			try {
				fujaba__Success = false;

				// check object goalField is really bound
				JavaSDM.ensure(goalField != null);
				// check object match is really bound
				JavaSDM.ensure(match != null);
				// check object northernField is really bound
				JavaSDM.ensure(northernField != null);
				// check object pitch is really bound
				JavaSDM.ensure(pitch != null);
				// check isomorphic binding between objects northernField and goalField 
				JavaSDM.ensure(!northernField.equals(goalField));

				// create object pitch__fields__northernField
				pitch__fields__northernField = TGGRuntimeFactory.eINSTANCE
						.createEdge();

				// create object northernField__south__goalField
				northernField__south__goalField = TGGRuntimeFactory.eINSTANCE
						.createEdge();

				// create object pitch__fields__goalField
				pitch__fields__goalField = TGGRuntimeFactory.eINSTANCE
						.createEdge();

				// assign attribute pitch__fields__goalField
				pitch__fields__goalField.setName("fields");
				// assign attribute pitch__fields__northernField
				pitch__fields__northernField.setName("fields");
				// assign attribute northernField__south__goalField
				northernField__south__goalField.setName("south");

				// create link
				org.moflon.util.eMoflonEMFUtil.addOppositeReference(match,
						pitch, "contextNodes");

				// create link
				org.moflon.util.eMoflonEMFUtil.addOppositeReference(match,
						pitch__fields__northernField, "contextEdges");

				// create link
				org.moflon.util.eMoflonEMFUtil.addOppositeReference(match,
						goalField, "contextNodes");

				// create link
				org.moflon.util.eMoflonEMFUtil.addOppositeReference(match,
						northernField__south__goalField, "contextEdges");

				// create link
				org.moflon.util.eMoflonEMFUtil.addOppositeReference(match,
						pitch__fields__goalField, "contextEdges");

				// create link
				org.moflon.util.eMoflonEMFUtil.addOppositeReference(match,
						northernField, "contextNodes");

				// create link
				pitch__fields__northernField.setSrc(pitch);

				// create link
				pitch__fields__goalField.setSrc(pitch);

				// create link
				pitch__fields__goalField.setTrg(goalField);

				// create link
				northernField__south__goalField.setTrg(goalField);

				// create link
				pitch__fields__northernField.setTrg(northernField);

				// create link
				northernField__south__goalField.setSrc(northernField);

				fujaba__Success = true;
			} catch (JavaSDMException fujaba__InternalException) {
				fujaba__Success = false;
			}

			// statement node 'register objects to match'
			match.registerObject("pitch", pitch);
			match.registerObject("goalField", goalField);
			match.registerObject("goalKeeper", goalKeeper);
			match.registerObject("northernField", northernField);

			return true;

		} else {
			return false;

		}
	}

	/**
	 * <!-- begin-user-doc -->
	 * <!-- end-user-doc -->
	 * @generated
	 */
	public PerformRuleResult perform_FWD(IsApplicableMatch isApplicableMatch) {
		boolean fujaba__Success = false;
		Object _TmpObject = null;
		GoalField goalField = null;
		GoalKeeper goalKeeper = null;
		GoalField northernField = null;
		SoccerPitchToUpdate p2u = null;
		SoccerPitch pitch = null;
		Update update = null;
		Iterator fujaba__IterIsApplicableMatchToCsp = null;
		CSP csp = null;
		MovePlayer moveAction = null;
		PerformRuleResult ruleresult = null;
		Edge pitch__players__goalKeeper = null;
		Edge goalKeeper__field__goalField = null;
		Edge update__actions__moveAction = null;

		// story node 'perform transformation'
		try {
			fujaba__Success = false;

			_TmpObject = (isApplicableMatch.getObject("goalField"));

			// ensure correct type and really bound of object goalField
			JavaSDM.ensure(_TmpObject instanceof GoalField);
			goalField = (GoalField) _TmpObject;
			_TmpObject = (isApplicableMatch.getObject("goalKeeper"));

			// ensure correct type and really bound of object goalKeeper
			JavaSDM.ensure(_TmpObject instanceof GoalKeeper);
			goalKeeper = (GoalKeeper) _TmpObject;
			_TmpObject = (isApplicableMatch.getObject("northernField"));

			// ensure correct type and really bound of object northernField
			JavaSDM.ensure(_TmpObject instanceof GoalField);
			northernField = (GoalField) _TmpObject;
			_TmpObject = (isApplicableMatch.getObject("p2u"));

			// ensure correct type and really bound of object p2u
			JavaSDM.ensure(_TmpObject instanceof SoccerPitchToUpdate);
			p2u = (SoccerPitchToUpdate) _TmpObject;
			_TmpObject = (isApplicableMatch.getObject("pitch"));

			// ensure correct type and really bound of object pitch
			JavaSDM.ensure(_TmpObject instanceof SoccerPitch);
			pitch = (SoccerPitch) _TmpObject;
			_TmpObject = (isApplicableMatch.getObject("update"));

			// ensure correct type and really bound of object update
			JavaSDM.ensure(_TmpObject instanceof Update);
			update = (Update) _TmpObject;
			// check object isApplicableMatch is really bound
			JavaSDM.ensure(isApplicableMatch != null);
			// check isomorphic binding between objects northernField and goalField 
			JavaSDM.ensure(!northernField.equals(goalField));

			// iterate to-many link attributeInfo from isApplicableMatch to csp
			fujaba__Success = false;

			fujaba__IterIsApplicableMatchToCsp = isApplicableMatch
					.getAttributeInfo().iterator();

			while (!(fujaba__Success)
					&& fujaba__IterIsApplicableMatchToCsp.hasNext()) {
				try {
					_TmpObject = fujaba__IterIsApplicableMatchToCsp.next();

					// ensure correct type and really bound of object csp
					JavaSDM.ensure(_TmpObject instanceof CSP);
					csp = (CSP) _TmpObject;

					fujaba__Success = true;
				} catch (JavaSDMException fujaba__InternalException) {
					fujaba__Success = false;
				}
			}
			if (!fujaba__Success) {
				fujaba__Success = true;
				csp = null;
			}
			// create object moveAction
			moveAction = UpdatemodelFactory.eINSTANCE.createMovePlayer();

			// assign attribute moveAction
			moveAction.setYDist(-1);
			// assign attribute moveAction
			moveAction.setPlayerNumber(((Number) csp.getAttributeVariable(
					"moveAction", "playerNumber").getValue()).intValue());

			// create link
			update.getActions().add(moveAction); // add link

			fujaba__Success = true;
		} catch (JavaSDMException fujaba__InternalException) {
			fujaba__Success = false;
		}

		// story node 'collect translated elements'
		try {
			fujaba__Success = false;

			// check object goalKeeper is really bound
			JavaSDM.ensure(goalKeeper != null);
			// check object moveAction is really bound
			JavaSDM.ensure(moveAction != null);
			// create object ruleresult
			ruleresult = TGGRuntimeFactory.eINSTANCE.createPerformRuleResult();

			// assign attribute ruleresult
			ruleresult.setSuccess(true);

			// create link
			org.moflon.util.eMoflonEMFUtil.addOppositeReference(ruleresult,
					goalKeeper, "translatedElements");

			// create link
			org.moflon.util.eMoflonEMFUtil.addOppositeReference(ruleresult,
					moveAction, "createdElements");
			fujaba__Success = true;
		} catch (JavaSDMException fujaba__InternalException) {
			fujaba__Success = false;
		}

		// story node 'bookkeeping for edges'
		try {
			fujaba__Success = false;

			// check object goalField is really bound
			JavaSDM.ensure(goalField != null);
			// check object goalKeeper is really bound
			JavaSDM.ensure(goalKeeper != null);
			// check object moveAction is really bound
			JavaSDM.ensure(moveAction != null);
			// check object northernField is really bound
			JavaSDM.ensure(northernField != null);
			// check object p2u is really bound
			JavaSDM.ensure(p2u != null);
			// check object pitch is really bound
			JavaSDM.ensure(pitch != null);
			// check object ruleresult is really bound
			JavaSDM.ensure(ruleresult != null);
			// check object update is really bound
			JavaSDM.ensure(update != null);
			// check isomorphic binding between objects goalKeeper and goalField 
			JavaSDM.ensure(!goalKeeper.equals(goalField));

			// check isomorphic binding between objects moveAction and goalField 
			JavaSDM.ensure(!moveAction.equals(goalField));

			// check isomorphic binding between objects northernField and goalField 
			JavaSDM.ensure(!northernField.equals(goalField));

			// check isomorphic binding between objects p2u and goalField 
			JavaSDM.ensure(!p2u.equals(goalField));

			// check isomorphic binding between objects pitch and goalField 
			JavaSDM.ensure(!pitch.equals(goalField));

			// check isomorphic binding between objects update and goalField 
			JavaSDM.ensure(!update.equals(goalField));

			// check isomorphic binding between objects moveAction and goalKeeper 
			JavaSDM.ensure(!moveAction.equals(goalKeeper));

			// check isomorphic binding between objects northernField and goalKeeper 
			JavaSDM.ensure(!northernField.equals(goalKeeper));

			// check isomorphic binding between objects p2u and goalKeeper 
			JavaSDM.ensure(!p2u.equals(goalKeeper));

			// check isomorphic binding between objects pitch and goalKeeper 
			JavaSDM.ensure(!pitch.equals(goalKeeper));

			// check isomorphic binding between objects update and goalKeeper 
			JavaSDM.ensure(!update.equals(goalKeeper));

			// check isomorphic binding between objects northernField and moveAction 
			JavaSDM.ensure(!northernField.equals(moveAction));

			// check isomorphic binding between objects p2u and moveAction 
			JavaSDM.ensure(!p2u.equals(moveAction));

			// check isomorphic binding between objects pitch and moveAction 
			JavaSDM.ensure(!pitch.equals(moveAction));

			// check isomorphic binding between objects update and moveAction 
			JavaSDM.ensure(!update.equals(moveAction));

			// check isomorphic binding between objects p2u and northernField 
			JavaSDM.ensure(!p2u.equals(northernField));

			// check isomorphic binding between objects pitch and northernField 
			JavaSDM.ensure(!pitch.equals(northernField));

			// check isomorphic binding between objects update and northernField 
			JavaSDM.ensure(!update.equals(northernField));

			// check isomorphic binding between objects pitch and p2u 
			JavaSDM.ensure(!pitch.equals(p2u));

			// check isomorphic binding between objects update and p2u 
			JavaSDM.ensure(!update.equals(p2u));

			// check isomorphic binding between objects update and pitch 
			JavaSDM.ensure(!update.equals(pitch));

			// create object pitch__players__goalKeeper
			pitch__players__goalKeeper = TGGRuntimeFactory.eINSTANCE
					.createEdge();

			// create object goalKeeper__field__goalField
			goalKeeper__field__goalField = TGGRuntimeFactory.eINSTANCE
					.createEdge();

			// create object update__actions__moveAction
			update__actions__moveAction = TGGRuntimeFactory.eINSTANCE
					.createEdge();

			// assign attribute pitch__players__goalKeeper
			pitch__players__goalKeeper.setName("players");
			// assign attribute goalKeeper__field__goalField
			goalKeeper__field__goalField.setName("field");
			// assign attribute update__actions__moveAction
			update__actions__moveAction.setName("actions");

			// create link
			org.moflon.util.eMoflonEMFUtil.addOppositeReference(ruleresult,
					pitch__players__goalKeeper, "translatedEdges");

			// create link
			org.moflon.util.eMoflonEMFUtil.addOppositeReference(ruleresult,
					goalKeeper__field__goalField, "translatedEdges");

			// create link
			org.moflon.util.eMoflonEMFUtil.addOppositeReference(ruleresult,
					update__actions__moveAction, "createdEdges");

			// create link
			pitch__players__goalKeeper.setSrc(pitch);

			// create link
			goalKeeper__field__goalField.setTrg(goalField);

			// create link
			goalKeeper__field__goalField.setSrc(goalKeeper);

			// create link
			pitch__players__goalKeeper.setTrg(goalKeeper);

			// create link
			update__actions__moveAction.setSrc(update);

			// create link
			update__actions__moveAction.setTrg(moveAction);

			fujaba__Success = true;
		} catch (JavaSDMException fujaba__InternalException) {
			fujaba__Success = false;
		}

		// statement node 'perform postprocessing'
		// No post processing method found
		return ruleresult;
	}

	/**
	 * <!-- begin-user-doc -->
	 * <!-- end-user-doc -->
	 * @generated
	 */
	public boolean checkTypes_FWD(Match match) {
		return match
				.getObject("goalKeeper")
				.eClass()
				.equals(soccerpitch.SoccerpitchPackage.eINSTANCE
						.getGoalKeeper());
	}

	/**
	 * <!-- begin-user-doc -->
	 * <!-- end-user-doc -->
	 * @generated
	 */
	public EObjectContainer isAppropriate_FWD_SoccerPitch_7(SoccerPitch pitch) {
		boolean fujaba__Success = false;
		Object _TmpObject = null;
		EClass __eClass = null;
		Iterator fujaba__Iter__eClassTo__performOperation = null;
		EOperation __performOperation = null;
		EObjectContainer __result = null;
		Field __DEC_goalKeeper_players_354082 = null;
		SoccerPitch __DEC_goalKeeper_players_143727 = null;
		Match match = null;
		GoalField northernField = null;
		GoalField goalField = null;
		Iterator fujaba__IterPitchToGoalKeeper = null;
		GoalKeeper goalKeeper = null;

		// story node 'prepare return value'
		try {
			fujaba__Success = false;

			_TmpObject = (this.eClass());

			// ensure correct type and really bound of object __eClass
			JavaSDM.ensure(_TmpObject instanceof EClass);
			__eClass = (EClass) _TmpObject;
			// iterate to-many link eOperations from __eClass to __performOperation
			fujaba__Success = false;

			fujaba__Iter__eClassTo__performOperation = __eClass
					.getEOperations().iterator();

			while (!(fujaba__Success)
					&& fujaba__Iter__eClassTo__performOperation.hasNext()) {
				try {
					__performOperation = (EOperation) fujaba__Iter__eClassTo__performOperation
							.next();

					// check object __performOperation is really bound
					JavaSDM.ensure(__performOperation != null);
					// attribute condition
					JavaSDM.ensure(JavaSDM.stringCompare(
							__performOperation.getName(), "isApplicable_FWD") == 0);

					fujaba__Success = true;
				} catch (JavaSDMException fujaba__InternalException) {
					fujaba__Success = false;
				}
			}
			JavaSDM.ensure(fujaba__Success);
			// create object __result
			__result = TGGRuntimeFactory.eINSTANCE.createEObjectContainer();

			fujaba__Success = true;
		} catch (JavaSDMException fujaba__InternalException) {
			fujaba__Success = false;
		}

		// story node 'test core match kernel'
		try {
			fujaba__Success = false;

			// check object pitch is really bound
			JavaSDM.ensure(pitch != null);
			// iterate to-many link players from pitch to goalKeeper
			fujaba__Success = false;

			fujaba__IterPitchToGoalKeeper = new ArrayList(pitch.getPlayers())
					.iterator();

			while (fujaba__IterPitchToGoalKeeper.hasNext()) {
				try {
					_TmpObject = fujaba__IterPitchToGoalKeeper.next();

					// ensure correct type and really bound of object goalKeeper
					JavaSDM.ensure(_TmpObject instanceof GoalKeeper);
					goalKeeper = (GoalKeeper) _TmpObject;
					// bind object
					_TmpObject = goalKeeper.getField();

					// ensure correct type and really bound of object goalField
					JavaSDM.ensure(_TmpObject instanceof GoalField);
					goalField = (GoalField) _TmpObject;

					// bind object
					_TmpObject = goalField.getNorth();

					// ensure correct type and really bound of object northernField
					JavaSDM.ensure(_TmpObject instanceof GoalField);
					northernField = (GoalField) _TmpObject;

					// check isomorphic binding between objects northernField and goalField 
					JavaSDM.ensure(!northernField.equals(goalField));

					// check link fields from goalField to pitch
					JavaSDM.ensure(pitch.equals(goalField.eContainer()));

					// check link fields from northernField to pitch
					JavaSDM.ensure(pitch.equals(northernField.eContainer()));

					// story node 'test core match and DECs'
					try {
						fujaba__Success = false;

						// check negative bindings
						try {
							fujaba__Success = false;

							// bind object
							__DEC_goalKeeper_players_354082 = goalKeeper
									.getField();

							// check object __DEC_goalKeeper_players_354082 is really bound
							JavaSDM.ensure(__DEC_goalKeeper_players_354082 != null);

							// check isomorphic binding between objects __DEC_goalKeeper_players_354082 and goalField 
							JavaSDM.ensure(!__DEC_goalKeeper_players_354082
									.equals(goalField));

							// check isomorphic binding between objects __DEC_goalKeeper_players_354082 and northernField 
							JavaSDM.ensure(!__DEC_goalKeeper_players_354082
									.equals(northernField));

							fujaba__Success = true;
						} catch (JavaSDMException fujaba__InternalException) {
							fujaba__Success = false;
						}

						fujaba__Success = !(fujaba__Success);

						JavaSDM.ensure(fujaba__Success);

						// check negative bindings
						try {
							fujaba__Success = false;

							// bind object
							__DEC_goalKeeper_players_143727 = goalKeeper
									.eContainer() instanceof SoccerPitch ? (SoccerPitch) goalKeeper
									.eContainer() : null;

							// check object __DEC_goalKeeper_players_143727 is really bound
							JavaSDM.ensure(__DEC_goalKeeper_players_143727 != null);

							// check if contained via correct reference
							JavaSDM.ensure(__DEC_goalKeeper_players_143727
									.getPlayers().contains(goalKeeper));

							// check isomorphic binding between objects __DEC_goalKeeper_players_143727 and pitch 
							JavaSDM.ensure(!__DEC_goalKeeper_players_143727
									.equals(pitch));

							fujaba__Success = true;
						} catch (JavaSDMException fujaba__InternalException) {
							fujaba__Success = false;
						}

						fujaba__Success = !(fujaba__Success);

						JavaSDM.ensure(fujaba__Success);

						// check object goalField is really bound
						JavaSDM.ensure(goalField != null);
						// check object goalKeeper is really bound
						JavaSDM.ensure(goalKeeper != null);
						// check object northernField is really bound
						JavaSDM.ensure(northernField != null);
						// check object pitch is really bound
						JavaSDM.ensure(pitch != null);
						// check isomorphic binding between objects northernField and goalField 
						JavaSDM.ensure(!northernField.equals(goalField));

						// check link field from goalKeeper to goalField
						JavaSDM.ensure(goalField.equals(goalKeeper.getField()));

						// check link north from northernField to goalField
						JavaSDM.ensure(goalField.equals(northernField
								.getSouth()));

						// check link fields from goalField to pitch
						JavaSDM.ensure(pitch.equals(goalField.eContainer()));

						// check link fields from northernField to pitch
						JavaSDM.ensure(pitch.equals(northernField.eContainer()));

						// check link players from goalKeeper to pitch
						JavaSDM.ensure(pitch.equals(goalKeeper.eContainer()));

						// create object match
						match = TGGRuntimeFactory.eINSTANCE.createMatch();

						// assign attribute match
						match.setRuleName(__eClass.getName());
						// statement node 'bookkeeping with generic isAppropriate method'
						fujaba__Success = this.isAppropriate_FWD(match, pitch,
								goalField, goalKeeper, northernField);
						if (fujaba__Success) {
							// statement node ''
							fujaba__Success = this.checkTypes_FWD(match);
							if (fujaba__Success) {
								// story node 'Add match to rule result'
								try {
									fujaba__Success = false;

									// check object __performOperation is really bound
									JavaSDM.ensure(__performOperation != null);
									// check object __result is really bound
									JavaSDM.ensure(__result != null);
									// check object match is really bound
									JavaSDM.ensure(match != null);

									// create link
									org.moflon.util.eMoflonEMFUtil
											.addOppositeReference(__result,
													match, "contents");

									// create link
									org.moflon.util.eMoflonEMFUtil
											.addOppositeReference(match,
													__performOperation,
													"isApplicableOperation");
									fujaba__Success = true;
								} catch (JavaSDMException fujaba__InternalException) {
									fujaba__Success = false;
								}

							} else {

							}

						} else {

						}
						fujaba__Success = true;
					} catch (JavaSDMException fujaba__InternalException) {
						fujaba__Success = false;
					}

					fujaba__Success = true;
				} catch (JavaSDMException fujaba__InternalException) {
					fujaba__Success = false;
				}
			}
			JavaSDM.ensure(fujaba__Success);
			fujaba__Success = true;
		} catch (JavaSDMException fujaba__InternalException) {
			fujaba__Success = false;
		}

		return __result;
	}

	/**
	 * <!-- begin-user-doc -->
	 * <!-- end-user-doc -->
	 * @generated
	 */
	public EObjectContainer isAppropriate_FWD_GoalField_2(GoalField goalField) {
		boolean fujaba__Success = false;
		Object _TmpObject = null;
		EClass __eClass = null;
		Iterator fujaba__Iter__eClassTo__performOperation = null;
		EOperation __performOperation = null;
		EObjectContainer __result = null;
		Field __DEC_goalKeeper_players_647506 = null;
		SoccerPitch __DEC_goalKeeper_players_861796 = null;
		Match match = null;
		Iterator fujaba__IterGoalFieldToGoalKeeper = null;
		GoalKeeper goalKeeper = null;
		SoccerPitch pitch = null;
		GoalField northernField = null;

		// story node 'prepare return value'
		try {
			fujaba__Success = false;

			_TmpObject = (this.eClass());

			// ensure correct type and really bound of object __eClass
			JavaSDM.ensure(_TmpObject instanceof EClass);
			__eClass = (EClass) _TmpObject;
			// iterate to-many link eOperations from __eClass to __performOperation
			fujaba__Success = false;

			fujaba__Iter__eClassTo__performOperation = __eClass
					.getEOperations().iterator();

			while (!(fujaba__Success)
					&& fujaba__Iter__eClassTo__performOperation.hasNext()) {
				try {
					__performOperation = (EOperation) fujaba__Iter__eClassTo__performOperation
							.next();

					// check object __performOperation is really bound
					JavaSDM.ensure(__performOperation != null);
					// attribute condition
					JavaSDM.ensure(JavaSDM.stringCompare(
							__performOperation.getName(), "isApplicable_FWD") == 0);

					fujaba__Success = true;
				} catch (JavaSDMException fujaba__InternalException) {
					fujaba__Success = false;
				}
			}
			JavaSDM.ensure(fujaba__Success);
			// create object __result
			__result = TGGRuntimeFactory.eINSTANCE.createEObjectContainer();

			fujaba__Success = true;
		} catch (JavaSDMException fujaba__InternalException) {
			fujaba__Success = false;
		}

		// story node 'test core match kernel'
		try {
			fujaba__Success = false;

			// check object goalField is really bound
			JavaSDM.ensure(goalField != null);
			// bind object
			_TmpObject = goalField.getNorth();

			// ensure correct type and really bound of object northernField
			JavaSDM.ensure(_TmpObject instanceof GoalField);
			northernField = (GoalField) _TmpObject;

			// check isomorphic binding between objects northernField and goalField 
			JavaSDM.ensure(!northernField.equals(goalField));

			// bind object
			pitch = goalField.eContainer() instanceof SoccerPitch ? (SoccerPitch) goalField
					.eContainer() : null;

			// check object pitch is really bound
			JavaSDM.ensure(pitch != null);

			// check if contained via correct reference
			JavaSDM.ensure(pitch.getFields().contains(goalField));

			// check link fields from northernField to pitch
			JavaSDM.ensure(pitch.equals(northernField.eContainer()));

			// iterate to-many link field from goalField to goalKeeper
			fujaba__Success = false;

			fujaba__IterGoalFieldToGoalKeeper = new ArrayList(
					goalField.getPlayers()).iterator();

			while (fujaba__IterGoalFieldToGoalKeeper.hasNext()) {
				try {
					_TmpObject = fujaba__IterGoalFieldToGoalKeeper.next();

					// ensure correct type and really bound of object goalKeeper
					JavaSDM.ensure(_TmpObject instanceof GoalKeeper);
					goalKeeper = (GoalKeeper) _TmpObject;
					// check link players from goalKeeper to pitch
					JavaSDM.ensure(pitch.equals(goalKeeper.eContainer()));

					// story node 'test core match and DECs'
					try {
						fujaba__Success = false;

						// check negative bindings
						try {
							fujaba__Success = false;

							// bind object
							__DEC_goalKeeper_players_647506 = goalKeeper
									.getField();

							// check object __DEC_goalKeeper_players_647506 is really bound
							JavaSDM.ensure(__DEC_goalKeeper_players_647506 != null);

							// check isomorphic binding between objects __DEC_goalKeeper_players_647506 and goalField 
							JavaSDM.ensure(!__DEC_goalKeeper_players_647506
									.equals(goalField));

							// check isomorphic binding between objects __DEC_goalKeeper_players_647506 and northernField 
							JavaSDM.ensure(!__DEC_goalKeeper_players_647506
									.equals(northernField));

							fujaba__Success = true;
						} catch (JavaSDMException fujaba__InternalException) {
							fujaba__Success = false;
						}

						fujaba__Success = !(fujaba__Success);

						JavaSDM.ensure(fujaba__Success);

						// check negative bindings
						try {
							fujaba__Success = false;

							// bind object
							__DEC_goalKeeper_players_861796 = goalKeeper
									.eContainer() instanceof SoccerPitch ? (SoccerPitch) goalKeeper
									.eContainer() : null;

							// check object __DEC_goalKeeper_players_861796 is really bound
							JavaSDM.ensure(__DEC_goalKeeper_players_861796 != null);

							// check if contained via correct reference
							JavaSDM.ensure(__DEC_goalKeeper_players_861796
									.getPlayers().contains(goalKeeper));

							// check isomorphic binding between objects __DEC_goalKeeper_players_861796 and pitch 
							JavaSDM.ensure(!__DEC_goalKeeper_players_861796
									.equals(pitch));

							fujaba__Success = true;
						} catch (JavaSDMException fujaba__InternalException) {
							fujaba__Success = false;
						}

						fujaba__Success = !(fujaba__Success);

						JavaSDM.ensure(fujaba__Success);

						// check object goalField is really bound
						JavaSDM.ensure(goalField != null);
						// check object goalKeeper is really bound
						JavaSDM.ensure(goalKeeper != null);
						// check object northernField is really bound
						JavaSDM.ensure(northernField != null);
						// check object pitch is really bound
						JavaSDM.ensure(pitch != null);
						// check isomorphic binding between objects northernField and goalField 
						JavaSDM.ensure(!northernField.equals(goalField));

						// check link field from goalKeeper to goalField
						JavaSDM.ensure(goalField.equals(goalKeeper.getField()));

						// check link north from northernField to goalField
						JavaSDM.ensure(goalField.equals(northernField
								.getSouth()));

						// check link fields from goalField to pitch
						JavaSDM.ensure(pitch.equals(goalField.eContainer()));

						// check link fields from northernField to pitch
						JavaSDM.ensure(pitch.equals(northernField.eContainer()));

						// check link players from goalKeeper to pitch
						JavaSDM.ensure(pitch.equals(goalKeeper.eContainer()));

						// create object match
						match = TGGRuntimeFactory.eINSTANCE.createMatch();

						// assign attribute match
						match.setRuleName(__eClass.getName());
						// statement node 'bookkeeping with generic isAppropriate method'
						fujaba__Success = this.isAppropriate_FWD(match, pitch,
								goalField, goalKeeper, northernField);
						if (fujaba__Success) {
							// statement node ''
							fujaba__Success = this.checkTypes_FWD(match);
							if (fujaba__Success) {
								// story node 'Add match to rule result'
								try {
									fujaba__Success = false;

									// check object __performOperation is really bound
									JavaSDM.ensure(__performOperation != null);
									// check object __result is really bound
									JavaSDM.ensure(__result != null);
									// check object match is really bound
									JavaSDM.ensure(match != null);

									// create link
									org.moflon.util.eMoflonEMFUtil
											.addOppositeReference(__result,
													match, "contents");

									// create link
									org.moflon.util.eMoflonEMFUtil
											.addOppositeReference(match,
													__performOperation,
													"isApplicableOperation");
									fujaba__Success = true;
								} catch (JavaSDMException fujaba__InternalException) {
									fujaba__Success = false;
								}

							} else {

							}

						} else {

						}
						fujaba__Success = true;
					} catch (JavaSDMException fujaba__InternalException) {
						fujaba__Success = false;
					}

					fujaba__Success = true;
				} catch (JavaSDMException fujaba__InternalException) {
					fujaba__Success = false;
				}
			}
			JavaSDM.ensure(fujaba__Success);

			fujaba__Success = true;
		} catch (JavaSDMException fujaba__InternalException) {
			fujaba__Success = false;
		}

		return __result;
	}

	/**
	 * <!-- begin-user-doc -->
	 * <!-- end-user-doc -->
	 * @generated
	 */
	public EObjectContainer isAppropriate_FWD_GoalKeeper_2(GoalKeeper goalKeeper) {
		boolean fujaba__Success = false;
		Object _TmpObject = null;
		EClass __eClass = null;
		Iterator fujaba__Iter__eClassTo__performOperation = null;
		EOperation __performOperation = null;
		EObjectContainer __result = null;
		Field __DEC_goalKeeper_players_840803 = null;
		SoccerPitch __DEC_goalKeeper_players_350845 = null;
		Match match = null;
		Iterator fujaba__IterPitchToNorthernField = null;
		GoalField northernField = null;
		SoccerPitch pitch = null;
		GoalField goalField = null;

		// story node 'prepare return value'
		try {
			fujaba__Success = false;

			_TmpObject = (this.eClass());

			// ensure correct type and really bound of object __eClass
			JavaSDM.ensure(_TmpObject instanceof EClass);
			__eClass = (EClass) _TmpObject;
			// iterate to-many link eOperations from __eClass to __performOperation
			fujaba__Success = false;

			fujaba__Iter__eClassTo__performOperation = __eClass
					.getEOperations().iterator();

			while (!(fujaba__Success)
					&& fujaba__Iter__eClassTo__performOperation.hasNext()) {
				try {
					__performOperation = (EOperation) fujaba__Iter__eClassTo__performOperation
							.next();

					// check object __performOperation is really bound
					JavaSDM.ensure(__performOperation != null);
					// attribute condition
					JavaSDM.ensure(JavaSDM.stringCompare(
							__performOperation.getName(), "isApplicable_FWD") == 0);

					fujaba__Success = true;
				} catch (JavaSDMException fujaba__InternalException) {
					fujaba__Success = false;
				}
			}
			JavaSDM.ensure(fujaba__Success);
			// create object __result
			__result = TGGRuntimeFactory.eINSTANCE.createEObjectContainer();

			fujaba__Success = true;
		} catch (JavaSDMException fujaba__InternalException) {
			fujaba__Success = false;
		}

		// story node 'test core match kernel'
		try {
			fujaba__Success = false;

			// check object goalKeeper is really bound
			JavaSDM.ensure(goalKeeper != null);
			// bind object
			_TmpObject = goalKeeper.getField();

			// ensure correct type and really bound of object goalField
			JavaSDM.ensure(_TmpObject instanceof GoalField);
			goalField = (GoalField) _TmpObject;

			// bind object
			pitch = goalKeeper.eContainer() instanceof SoccerPitch ? (SoccerPitch) goalKeeper
					.eContainer() : null;

			// check object pitch is really bound
			JavaSDM.ensure(pitch != null);

			// check if contained via correct reference
			JavaSDM.ensure(pitch.getPlayers().contains(goalKeeper));

			// check link fields from goalField to pitch
			JavaSDM.ensure(pitch.equals(goalField.eContainer()));

			// iterate to-many link fields from pitch to northernField
			fujaba__Success = false;

			fujaba__IterPitchToNorthernField = new ArrayList(pitch.getFields())
					.iterator();

			while (fujaba__IterPitchToNorthernField.hasNext()) {
				try {
					_TmpObject = fujaba__IterPitchToNorthernField.next();

					// ensure correct type and really bound of object northernField
					JavaSDM.ensure(_TmpObject instanceof GoalField);
					northernField = (GoalField) _TmpObject;
					// check isomorphic binding between objects northernField and goalField 
					JavaSDM.ensure(!northernField.equals(goalField));

					// check link north from northernField to goalField
					JavaSDM.ensure(goalField.equals(northernField.getSouth()));

					// story node 'test core match and DECs'
					try {
						fujaba__Success = false;

						// check negative bindings
						try {
							fujaba__Success = false;

							// bind object
							__DEC_goalKeeper_players_840803 = goalKeeper
									.getField();

							// check object __DEC_goalKeeper_players_840803 is really bound
							JavaSDM.ensure(__DEC_goalKeeper_players_840803 != null);

							// check isomorphic binding between objects __DEC_goalKeeper_players_840803 and goalField 
							JavaSDM.ensure(!__DEC_goalKeeper_players_840803
									.equals(goalField));

							// check isomorphic binding between objects __DEC_goalKeeper_players_840803 and northernField 
							JavaSDM.ensure(!__DEC_goalKeeper_players_840803
									.equals(northernField));

							fujaba__Success = true;
						} catch (JavaSDMException fujaba__InternalException) {
							fujaba__Success = false;
						}

						fujaba__Success = !(fujaba__Success);

						JavaSDM.ensure(fujaba__Success);

						// check negative bindings
						try {
							fujaba__Success = false;

							// bind object
							__DEC_goalKeeper_players_350845 = goalKeeper
									.eContainer() instanceof SoccerPitch ? (SoccerPitch) goalKeeper
									.eContainer() : null;

							// check object __DEC_goalKeeper_players_350845 is really bound
							JavaSDM.ensure(__DEC_goalKeeper_players_350845 != null);

							// check if contained via correct reference
							JavaSDM.ensure(__DEC_goalKeeper_players_350845
									.getPlayers().contains(goalKeeper));

							// check isomorphic binding between objects __DEC_goalKeeper_players_350845 and pitch 
							JavaSDM.ensure(!__DEC_goalKeeper_players_350845
									.equals(pitch));

							fujaba__Success = true;
						} catch (JavaSDMException fujaba__InternalException) {
							fujaba__Success = false;
						}

						fujaba__Success = !(fujaba__Success);

						JavaSDM.ensure(fujaba__Success);

						// check object goalField is really bound
						JavaSDM.ensure(goalField != null);
						// check object goalKeeper is really bound
						JavaSDM.ensure(goalKeeper != null);
						// check object northernField is really bound
						JavaSDM.ensure(northernField != null);
						// check object pitch is really bound
						JavaSDM.ensure(pitch != null);
						// check isomorphic binding between objects northernField and goalField 
						JavaSDM.ensure(!northernField.equals(goalField));

						// check link field from goalKeeper to goalField
						JavaSDM.ensure(goalField.equals(goalKeeper.getField()));

						// check link north from northernField to goalField
						JavaSDM.ensure(goalField.equals(northernField
								.getSouth()));

						// check link fields from goalField to pitch
						JavaSDM.ensure(pitch.equals(goalField.eContainer()));

						// check link fields from northernField to pitch
						JavaSDM.ensure(pitch.equals(northernField.eContainer()));

						// check link players from goalKeeper to pitch
						JavaSDM.ensure(pitch.equals(goalKeeper.eContainer()));

						// create object match
						match = TGGRuntimeFactory.eINSTANCE.createMatch();

						// assign attribute match
						match.setRuleName(__eClass.getName());
						// statement node 'bookkeeping with generic isAppropriate method'
						fujaba__Success = this.isAppropriate_FWD(match, pitch,
								goalField, goalKeeper, northernField);
						if (fujaba__Success) {
							// statement node ''
							fujaba__Success = this.checkTypes_FWD(match);
							if (fujaba__Success) {
								// story node 'Add match to rule result'
								try {
									fujaba__Success = false;

									// check object __performOperation is really bound
									JavaSDM.ensure(__performOperation != null);
									// check object __result is really bound
									JavaSDM.ensure(__result != null);
									// check object match is really bound
									JavaSDM.ensure(match != null);

									// create link
									org.moflon.util.eMoflonEMFUtil
											.addOppositeReference(__result,
													match, "contents");

									// create link
									org.moflon.util.eMoflonEMFUtil
											.addOppositeReference(match,
													__performOperation,
													"isApplicableOperation");
									fujaba__Success = true;
								} catch (JavaSDMException fujaba__InternalException) {
									fujaba__Success = false;
								}

							} else {

							}

						} else {

						}
						fujaba__Success = true;
					} catch (JavaSDMException fujaba__InternalException) {
						fujaba__Success = false;
					}

					fujaba__Success = true;
				} catch (JavaSDMException fujaba__InternalException) {
					fujaba__Success = false;
				}
			}
			JavaSDM.ensure(fujaba__Success);

			fujaba__Success = true;
		} catch (JavaSDMException fujaba__InternalException) {
			fujaba__Success = false;
		}

		return __result;
	}

	/**
	 * <!-- begin-user-doc -->
	 * <!-- end-user-doc -->
	 * @generated
	 */
	public EObjectContainer isAppropriate_FWD_GoalField_3(
			GoalField northernField) {
		boolean fujaba__Success = false;
		Object _TmpObject = null;
		EClass __eClass = null;
		Iterator fujaba__Iter__eClassTo__performOperation = null;
		EOperation __performOperation = null;
		EObjectContainer __result = null;
		Field __DEC_goalKeeper_players_326106 = null;
		SoccerPitch __DEC_goalKeeper_players_939095 = null;
		Match match = null;
		Iterator fujaba__IterPitchToGoalKeeper = null;
		GoalKeeper goalKeeper = null;
		SoccerPitch pitch = null;
		GoalField goalField = null;

		// story node 'prepare return value'
		try {
			fujaba__Success = false;

			_TmpObject = (this.eClass());

			// ensure correct type and really bound of object __eClass
			JavaSDM.ensure(_TmpObject instanceof EClass);
			__eClass = (EClass) _TmpObject;
			// iterate to-many link eOperations from __eClass to __performOperation
			fujaba__Success = false;

			fujaba__Iter__eClassTo__performOperation = __eClass
					.getEOperations().iterator();

			while (!(fujaba__Success)
					&& fujaba__Iter__eClassTo__performOperation.hasNext()) {
				try {
					__performOperation = (EOperation) fujaba__Iter__eClassTo__performOperation
							.next();

					// check object __performOperation is really bound
					JavaSDM.ensure(__performOperation != null);
					// attribute condition
					JavaSDM.ensure(JavaSDM.stringCompare(
							__performOperation.getName(), "isApplicable_FWD") == 0);

					fujaba__Success = true;
				} catch (JavaSDMException fujaba__InternalException) {
					fujaba__Success = false;
				}
			}
			JavaSDM.ensure(fujaba__Success);
			// create object __result
			__result = TGGRuntimeFactory.eINSTANCE.createEObjectContainer();

			fujaba__Success = true;
		} catch (JavaSDMException fujaba__InternalException) {
			fujaba__Success = false;
		}

		// story node 'test core match kernel'
		try {
			fujaba__Success = false;

			// check object northernField is really bound
			JavaSDM.ensure(northernField != null);
			// bind object
			_TmpObject = northernField.getSouth();

			// ensure correct type and really bound of object goalField
			JavaSDM.ensure(_TmpObject instanceof GoalField);
			goalField = (GoalField) _TmpObject;

			// check isomorphic binding between objects northernField and goalField 
			JavaSDM.ensure(!northernField.equals(goalField));

			// bind object
			pitch = northernField.eContainer() instanceof SoccerPitch ? (SoccerPitch) northernField
					.eContainer() : null;

			// check object pitch is really bound
			JavaSDM.ensure(pitch != null);

			// check if contained via correct reference
			JavaSDM.ensure(pitch.getFields().contains(northernField));

			// check link fields from goalField to pitch
			JavaSDM.ensure(pitch.equals(goalField.eContainer()));

			// iterate to-many link players from pitch to goalKeeper
			fujaba__Success = false;

			fujaba__IterPitchToGoalKeeper = new ArrayList(pitch.getPlayers())
					.iterator();

			while (fujaba__IterPitchToGoalKeeper.hasNext()) {
				try {
					_TmpObject = fujaba__IterPitchToGoalKeeper.next();

					// ensure correct type and really bound of object goalKeeper
					JavaSDM.ensure(_TmpObject instanceof GoalKeeper);
					goalKeeper = (GoalKeeper) _TmpObject;
					// check link field from goalKeeper to goalField
					JavaSDM.ensure(goalField.equals(goalKeeper.getField()));

					// story node 'test core match and DECs'
					try {
						fujaba__Success = false;

						// check negative bindings
						try {
							fujaba__Success = false;

							// bind object
							__DEC_goalKeeper_players_326106 = goalKeeper
									.getField();

							// check object __DEC_goalKeeper_players_326106 is really bound
							JavaSDM.ensure(__DEC_goalKeeper_players_326106 != null);

							// check isomorphic binding between objects __DEC_goalKeeper_players_326106 and goalField 
							JavaSDM.ensure(!__DEC_goalKeeper_players_326106
									.equals(goalField));

							// check isomorphic binding between objects __DEC_goalKeeper_players_326106 and northernField 
							JavaSDM.ensure(!__DEC_goalKeeper_players_326106
									.equals(northernField));

							fujaba__Success = true;
						} catch (JavaSDMException fujaba__InternalException) {
							fujaba__Success = false;
						}

						fujaba__Success = !(fujaba__Success);

						JavaSDM.ensure(fujaba__Success);

						// check negative bindings
						try {
							fujaba__Success = false;

							// bind object
							__DEC_goalKeeper_players_939095 = goalKeeper
									.eContainer() instanceof SoccerPitch ? (SoccerPitch) goalKeeper
									.eContainer() : null;

							// check object __DEC_goalKeeper_players_939095 is really bound
							JavaSDM.ensure(__DEC_goalKeeper_players_939095 != null);

							// check if contained via correct reference
							JavaSDM.ensure(__DEC_goalKeeper_players_939095
									.getPlayers().contains(goalKeeper));

							// check isomorphic binding between objects __DEC_goalKeeper_players_939095 and pitch 
							JavaSDM.ensure(!__DEC_goalKeeper_players_939095
									.equals(pitch));

							fujaba__Success = true;
						} catch (JavaSDMException fujaba__InternalException) {
							fujaba__Success = false;
						}

						fujaba__Success = !(fujaba__Success);

						JavaSDM.ensure(fujaba__Success);

						// check object goalField is really bound
						JavaSDM.ensure(goalField != null);
						// check object goalKeeper is really bound
						JavaSDM.ensure(goalKeeper != null);
						// check object northernField is really bound
						JavaSDM.ensure(northernField != null);
						// check object pitch is really bound
						JavaSDM.ensure(pitch != null);
						// check isomorphic binding between objects northernField and goalField 
						JavaSDM.ensure(!northernField.equals(goalField));

						// check link field from goalKeeper to goalField
						JavaSDM.ensure(goalField.equals(goalKeeper.getField()));

						// check link north from northernField to goalField
						JavaSDM.ensure(goalField.equals(northernField
								.getSouth()));

						// check link fields from goalField to pitch
						JavaSDM.ensure(pitch.equals(goalField.eContainer()));

						// check link fields from northernField to pitch
						JavaSDM.ensure(pitch.equals(northernField.eContainer()));

						// check link players from goalKeeper to pitch
						JavaSDM.ensure(pitch.equals(goalKeeper.eContainer()));

						// create object match
						match = TGGRuntimeFactory.eINSTANCE.createMatch();

						// assign attribute match
						match.setRuleName(__eClass.getName());
						// statement node 'bookkeeping with generic isAppropriate method'
						fujaba__Success = this.isAppropriate_FWD(match, pitch,
								goalField, goalKeeper, northernField);
						if (fujaba__Success) {
							// statement node ''
							fujaba__Success = this.checkTypes_FWD(match);
							if (fujaba__Success) {
								// story node 'Add match to rule result'
								try {
									fujaba__Success = false;

									// check object __performOperation is really bound
									JavaSDM.ensure(__performOperation != null);
									// check object __result is really bound
									JavaSDM.ensure(__result != null);
									// check object match is really bound
									JavaSDM.ensure(match != null);

									// create link
									org.moflon.util.eMoflonEMFUtil
											.addOppositeReference(__result,
													match, "contents");

									// create link
									org.moflon.util.eMoflonEMFUtil
											.addOppositeReference(match,
													__performOperation,
													"isApplicableOperation");
									fujaba__Success = true;
								} catch (JavaSDMException fujaba__InternalException) {
									fujaba__Success = false;
								}

							} else {

							}

						} else {

						}
						fujaba__Success = true;
					} catch (JavaSDMException fujaba__InternalException) {
						fujaba__Success = false;
					}

					fujaba__Success = true;
				} catch (JavaSDMException fujaba__InternalException) {
					fujaba__Success = false;
				}
			}
			JavaSDM.ensure(fujaba__Success);

			fujaba__Success = true;
		} catch (JavaSDMException fujaba__InternalException) {
			fujaba__Success = false;
		}

		return __result;
	}

	/**
	 * <!-- begin-user-doc -->
	 * <!-- end-user-doc -->
	 * @generated
	 */
	@Override
	public Object eInvoke(int operationID, EList<?> arguments)
			throws InvocationTargetException {
		switch (operationID) {
		case RulesPackage.MOVE_GOAL_KEEPER_NORTH___IS_APPLICABLE_FWD__MATCH:
			return isApplicable_FWD((Match) arguments.get(0));
		case RulesPackage.MOVE_GOAL_KEEPER_NORTH___IS_APPROPRIATE_FWD__MATCH_SOCCERPITCH_GOALFIELD_GOALKEEPER_GOALFIELD:
			return isAppropriate_FWD((Match) arguments.get(0),
					(SoccerPitch) arguments.get(1),
					(GoalField) arguments.get(2),
					(GoalKeeper) arguments.get(3), (GoalField) arguments.get(4));
		case RulesPackage.MOVE_GOAL_KEEPER_NORTH___PERFORM_FWD__ISAPPLICABLEMATCH:
			return perform_FWD((IsApplicableMatch) arguments.get(0));
		case RulesPackage.MOVE_GOAL_KEEPER_NORTH___CHECK_TYPES_FWD__MATCH:
			return checkTypes_FWD((Match) arguments.get(0));
		case RulesPackage.MOVE_GOAL_KEEPER_NORTH___IS_APPROPRIATE_FWD_SOCCER_PITCH_7__SOCCERPITCH:
			return isAppropriate_FWD_SoccerPitch_7((SoccerPitch) arguments
					.get(0));
		case RulesPackage.MOVE_GOAL_KEEPER_NORTH___IS_APPROPRIATE_FWD_GOAL_FIELD_2__GOALFIELD:
			return isAppropriate_FWD_GoalField_2((GoalField) arguments.get(0));
		case RulesPackage.MOVE_GOAL_KEEPER_NORTH___IS_APPROPRIATE_FWD_GOAL_KEEPER_2__GOALKEEPER:
			return isAppropriate_FWD_GoalKeeper_2((GoalKeeper) arguments.get(0));
		case RulesPackage.MOVE_GOAL_KEEPER_NORTH___IS_APPROPRIATE_FWD_GOAL_FIELD_3__GOALFIELD:
			return isAppropriate_FWD_GoalField_3((GoalField) arguments.get(0));
		}
		return super.eInvoke(operationID, arguments);
	}

} //MoveGoalKeeperNorthImpl
